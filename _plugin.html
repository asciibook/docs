<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Plugin - Asciibook Document</title>
    <link rel="icon" href="icon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    

    <link rel="stylesheet" href="normalize.css" />
    <link rel="stylesheet" href="default.css" />
    <link rel="stylesheet" href="highlight.css" />
    <link rel="stylesheet" href="html.css" />
    <script src="html.js"></script>
  </head>
  <body class="preload">
    <div id="drawer" class="drawer">
      <div class="drawer-content">
        <div class="drawer-menu">
          
            <ol>
              
                <li>
                  <a class="drawer-menu-item " href="_table_of_contents.html">Table of Contents</a>
                  
                </li>
              
                <li>
                  <a class="drawer-menu-item " href="_introduction.html">Introduction</a>
                  
                </li>
              
                <li>
                  <a class="drawer-menu-item " href="_installation.html">Installation</a>
                  
                </li>
              
                <li>
                  <a class="drawer-menu-item " href="_build.html">Build</a>
                  
                </li>
              
                <li>
                  <a class="drawer-menu-item " href="_source_highlight.html">Source Highlight</a>
                  
                </li>
              
                <li>
                  <a class="drawer-menu-item " href="_equations_and_formulas_stem.html">Equations and Formulas (STEM)</a>
                  
                </li>
              
                <li>
                  <a class="drawer-menu-item " href="_style.html">Style</a>
                  
                </li>
              
                <li>
                  <a class="drawer-menu-item " href="_automation.html">Automation</a>
                  
                </li>
              
                <li>
                  <a class="drawer-menu-item  active " href="_plugin.html">Plugin</a>
                  
                </li>
              
                <li>
                  <a class="drawer-menu-item " href="_build_docker_image.html">Build Docker Image</a>
                  
                </li>
              
            </ol>
          
        </div>
      </div>
      <div class="drawer-backdrop">
      </div>
    </div>
    <div class="main">
      <div class="toolbar">
        <div class="toolbar-action">
          <button id="drawer-toggle" type="button" class="button button-icon">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M4 18h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zm0-5h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zM3 7c0 .55.45 1 1 1h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1z"/></svg>
          </button>
        </div>
        <div class="toolbar-title">
          <a href="index.html">
            Asciibook Document
          </a>
        </div>

        <div class="toolbar-action">
          <div class="dropdown">
            <button type="button" class="button button-icon dropdown-toggle">
              <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M9 5.5c0 .83.67 1.5 1.5 1.5H14v10.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V7h3.5c.83 0 1.5-.67 1.5-1.5S21.33 4 20.5 4h-10C9.67 4 9 4.67 9 5.5zM4.5 12H6v5.5c0 .83.67 1.5 1.5 1.5S9 18.33 9 17.5V12h1.5c.83 0 1.5-.67 1.5-1.5S11.33 9 10.5 9h-6C3.67 9 3 9.67 3 10.5S3.67 12 4.5 12z"/></svg>
            </button>
            <div class="dropdown-menu">
              <div class="dropdown-group">
                <label>Font Size</label>
                <div class="dropdown-options font-size-options">
                  <button type="button" class="button button-icon" data-action="reduce">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>
                  </button>
                  <div id="font-size-text">
                    100%
                  </div>
                  <button type="button" class="button button-icon" data-action="add">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>
                  </button>
                </div>
              </div>
              <div class="dropdown-group">
                <label>Font Family</label>
                <div class="dropdown-options font-family-options">
                  <button type="button" class="button button-text" data-value="serif">Serif</button>
                  <button type="button" class="button button-text" data-value="sans-serif">Sans</button>
                </div>
              </div>
              <div class="dropdown-group">
                <label>Background</label>
                <div class="dropdown-options background-options">
                  <button type="button" class="button button-icon active" data-value="white">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M9 16.17L5.53 12.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L9 16.17z"/></svg>
                  </button>
                  <button type="button" class="button button-icon" data-value="warm">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M9 16.17L5.53 12.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L9 16.17z"/></svg>
                  </button>
                  <button type="button" class="button button-icon" data-value="dim">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M9 16.17L5.53 12.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L9 16.17z"/></svg>
                  </button>
                  <button type="button" class="button button-icon" data-value="black">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M9 16.17L5.53 12.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L9 16.17z"/></svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="toolbar-action">
          <div class="dropdown">
            <button type="button" class="button button-icon dropdown-toggle" >
              <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0zm0 0h24v24H0V0z" fill="none"/><path d="M4 9h12c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zm0 4h12c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zm0 4h12c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zm15 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"/></svg>
            </button>
            <div class="dropdown-menu">
              
                <ol>
                  
                    <li>
                      <a class="dropdown-menu-item" href="#_example_1_ruby_gem">Example 1: Ruby Gem</a>
                      
                    </li>
                  
                    <li>
                      <a class="dropdown-menu-item" href="#_example_2_ruby_script">Example 2: Ruby Script</a>
                      
                    </li>
                  
                    <li>
                      <a class="dropdown-menu-item" href="#_next_step">Next Step</a>
                      
                    </li>
                  
                </ol>
              
            </div>
          </div>
        </div>
      </div>
      <div class="main-content" tabindex="-1">
        <div class="container">
          <section class="section" id="_plugin">
  <h1>Plugin</h1>
  <p >Asciibook has a plugin mechanism to extend its functions. You can modify asciidoc parsing, add macro processing, or use third-party themes through plugins.</p>

<p >Add the plugin by command line:</p>

<figure class="listing" >
  
  <pre class="rouge highlight"><code data-lang="console"><span class="go">asciibook build --plugin PLUGIN1,PLUGIN2,PLUGIN3</span></code></pre>
</figure>

<p >or in <code>asciibook.yml</code>:</p>

<figure class="listing" >
  
  <pre class="rouge highlight"><code data-lang="yaml"><span class="na">plugins</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">PLUGIN1</span>
  <span class="pi">-</span> <span class="s">PLUGIN2</span>
  <span class="pi">-</span> <span class="s">PLUGIN3</span></code></pre>
</figure>

<p >Plugin is Ruby Gem or Ruby script. For Ruby gem, use gem name as plugin value. For script file, use file path as plugin value.</p>

<div class="admonition admonition-warning" >
  <div class="admonition-icon">
    <b>WARNING</b>
  </div>
  <div class="admonition-content">
    
    <p >Using plugin will actually execute the Ruby code in the plugin, which can extend any function of asciibook, but it may also cause security risks. This includes deleting documents or uploading sensitive information to third-party websites.</p>

<p >Make sure to only use asciibook to process trusted documents, and always build documents in a docker container.</p>

  </div>
</div>

<section class="section" id="_example_1_ruby_gem">
  <h2>Example 1: Ruby Gem</h2>
  <p >we can add <code>asciidoctor-diagram</code> to support diagram.</p>

<p >First, install Ruby gem and Java runtime(require by ditaa) in container:</p>

<figure class="listing" >
  
  <pre class="rouge highlight"><code data-lang="console"><span class="gp">/asciibook#</span><span class="w"> </span>apt-get update <span class="o">&amp;&amp;</span> apt-get <span class="nb">install </span>default-jre-headless
<span class="gp">/asciibook#</span><span class="w"> </span>gem <span class="nb">install </span>asciidoctor-diagram</code></pre>
</figure>

<div class="admonition admonition-note" >
  <div class="admonition-icon">
    <b>NOTE</b>
  </div>
  <div class="admonition-content">
    
    <p >For difference diagram types need to install different dependencies, check the documentation for details:</p>

<p ><a class="link" href="https://docs.asciidoctor.org/diagram-extension/latest/#specifying-diagram-generator-paths"
     
      >https://docs.asciidoctor.org/diagram-extension/latest/#specifying-diagram-generator-paths</a></p>

  </div>
</div>

<p >Then add config in <code>asciibook.yml</code>:</p>

<figure class="listing" >
  
  <pre class="rouge highlight"><code data-lang="yaml"><span class="na">plugins</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">asciidoctor-diagram</span></code></pre>
</figure>

<p >Now we can use ditaa in asciidoc:</p>

<figure class="listing" >
  
  <pre class="rouge highlight"><code data-lang="console"><span class="go">[ditaa]
</span><span class="c">....
</span><span class="go">                   +-------------+
                   | Asciidoctor |-------+
                   |   diagram   |       |
                   +-------------+       | PNG out
                       ^                 |
                       | ditaa in        |
                       |                 v
</span><span class="gp"> +--------+   +--------+----+    /---------------\
 |        | --+ Asciidoctor +--&gt;</span><span class="w"> </span>|               |
<span class="go"> |  Text  |   +-------------+    |   Beautiful   |
 |Document|   |   !magic!   |    |    Output     |
 |     {d}|   |             |    |               |
 +---+----+   +-------------+    \---------------/
     :                                   ^
     |          Lots of work             |
     +-----------------------------------+
</span><span class="c">....</span></code></pre>
</figure>

<p >Build asciibook:</p>

<figure class="listing" >
  
  <pre class="rouge highlight"><code data-lang="console"><span class="gp">/asciibook#</span><span class="w"> </span>asciibook build</code></pre>
</figure>

<p >Ditaa source will generate a image.</p>

</section>

<section class="section" id="_example_2_ruby_script">
  <h2>Example 2: Ruby Script</h2>
  <p >If Ruby gem needs config, we can add a ruby script as plugin.</p>

<p >For example, <code>asciidoctor-plantuml</code> is a plugin to use external server as plantuml generator.</p>

<p >First, install ruby gem:</p>

<figure class="listing" >
  
  <pre class="rouge highlight"><code data-lang="console"><span class="gp">/asciibook#</span><span class="w"> </span>gem <span class="nb">install </span>asciidoctor-plantuml</code></pre>
</figure>

<p >Add this content to file <code>plugins/plantuml.rb</code>:</p>

<figure class="listing" >
  
  <pre class="rouge highlight"><code data-lang="ruby"><span class="nb">require</span> <span class="s2">"asciidoctor-plantuml"</span>

<span class="no">Asciidoctor</span><span class="o">::</span><span class="no">PlantUml</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">conf</span><span class="o">|</span>
  <span class="n">conf</span><span class="p">.</span><span class="nf">url</span> <span class="o">=</span> <span class="s2">"https://www.plantuml.com/plantuml"</span>
  <span class="n">conf</span><span class="p">.</span><span class="nf">encoding</span> <span class="o">=</span> <span class="s1">'deflate'</span>
<span class="k">end</span></code></pre>
</figure>

<p >Then add this file as plugin in <code>asciibook.yml</code>:</p>

<figure class="listing" >
  
  <pre class="rouge highlight"><code data-lang="yml"><span class="na">plugins</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">./plugins/plantuml.rb</span></code></pre>
</figure>

<p >Now asciibook will generate plantuml by plantuml.com .</p>

</section>

<section class="section" id="_next_step">
  <h2>Next Step</h2>
  <p >It should be noted that the dependencies installed in the container will disappear after exiting. To persist dependencies, you need to <a class="xref" href="_build_docker_image.html">Build Docker Image</a>.</p>

</section>

</section>

        </div>
      </div>
      <div class="paginator">
        <a href="_automation.html" class="paginator-prev ">
          <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none" opacity=".87"/><path d="M16.62 2.99c-.49-.49-1.28-.49-1.77 0L6.54 11.3c-.39.39-.39 1.02 0 1.41l8.31 8.31c.49.49 1.28.49 1.77 0s.49-1.28 0-1.77L9.38 12l7.25-7.25c.48-.48.48-1.28-.01-1.76z"/></svg>
        </a>
        <a href="_build_docker_image.html" class="paginator-next ">
          <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M24 24H0V0h24v24z" fill="none" opacity=".87"/><path d="M7.38 21.01c.49.49 1.28.49 1.77 0l8.31-8.31c.39-.39.39-1.02 0-1.41L9.15 2.98c-.49-.49-1.28-.49-1.77 0s-.49 1.28 0 1.77L14.62 12l-7.25 7.25c-.48.48-.48 1.28.01 1.76z"/></svg>
        </a>
      </div>
    </div>
  </body>
</html>
